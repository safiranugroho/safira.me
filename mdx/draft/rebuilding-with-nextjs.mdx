---
title: I rebuilt my site with Next.js and RSC
description: Something or other.
image: /img/002/person-programming.jpg
type: article
date: 2023-06-18
tags:
  - posts
---

- Next 13.4.5
- next-mdx-remote 4.4.1
  - Using next-mdx-remote/rsc
  - https://github.com/nrwl/nx/issues/17428
- tailwindcss 3.3.2
  - @tailwindcss/typography 0.5.9
  - className: `prose dark:prose-invert`
- Deploy using Vercel
  - No config, even?
- https://randoma11y.com/
  - Color scheme changes per session :)
  - Tailwind requires complete class names: https://tailwindcss.com/docs/content-configuration#dynamic-class-names
  - "...it will only find classes that exist as complete unbroken strings in your source files."
  - If the class names are dynamic, it won't generate the corresponding CSS.
- @headlessui/react ^1.7.15
- https://emoji.aranja.com/
- Using custom elements from Svelte
  - Rollup + a ton of plugins
  - Cannot use inline styles bc of how the bundling works
  - Publishing via NPM is actually a bit limiting, because I can't do server-side operations but I can't access the DOM either.
  - Maybe can lead to overengineering? Maybe importing it from a script is ok for now?
  - Embedding the doodles onto the site forces me to think about which parts of the doodles want to follow the parent's styling vs. doodle-specific styling
  - Also forces the doodles to work with dark mode too
  - If I need to query selectors, I need to do it inside the root element of the doodle (can't use document).

- I almost don't want to publish my old blog posts, but I probably should keep them?

TODO:
- [x] Add site navigation
- [x] Make everything responsive
- [x] Import assets/images
- [x] Dynamic metadata on each blog post
- [x] Dark mode
  - [x] Add toggle
  - [x] Choose color scheme
- [ ] Set up linter
- [ ] Doodles
  - [x] Import doodles as Svelte files
  - [x] ~~Weather doodle is not working?~~ False alarm, it's only not working locally.
  - [ ] Tip calculator doodle has a bug (needs to round up to 2 decimal points)
  - [x] https://robdodson.me/posts/at-font-face-doesnt-work-in-shadow-dom/
  - [x] Figure out how to import/set default css for doodles
  - [x] Enable HMR
  - [x] Make sure styling works with parent site
  - [ ] DRY the process of creating web components
  - [x] Position doodle is not working - styling is all off
  - [ ] Separate playground styling from shared doodle styling
  - [ ] Figure out how to host the doodles in the new infra
  - [ ] Fix broken elements that don't work with dark mode
  - [x] ~~Figure out Prismjs styles~~ Gave up, all code is the same color now.
  - [ ] Doodles list
  - [ ] "This doodle is only available on desktop. Sry."
  - [ ] Redirect doodles.safira.me to safira.me/doodles
- [ ] Redirect old paths of blog posts to new paths
- [ ] Organize tags
  - [ ] Search for tags
  - [ ] Show tags as links
- [ ] Make 404 page more fun
- [ ] Optimise performance
  - [ ] Image loading
  - [ ] Blog post loading
- [ ] Set up GA
  - [ ] Page
  - [ ] Color scheme

